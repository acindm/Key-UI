---
title: Virtualist 虚拟列表
nav:
  title: 组件
  path: /components
group:
  title: 数据型组件
---

# VirtualList - 虚拟列表

根据滚动容器元素的可视区域来渲染长列表数据中某一部分数据。  
虚拟列表通过仅渲染可视区域内的 DOM 元素，在处理超长列表时显著提升渲染性能，减少资源占用。

## 使用场景

- **长列表渲染**：当数据量较大时（如 1000+ 条数据），使用虚拟列表可以减少 DOM 节点数。
- **性能优化**：减少页面加载时间，提升滚动流畅度。

## 常规列表和虚拟列表

以下示例展示了普通列表和虚拟列表的性能差异。
<code src="./demo/base.tsx"></code>
通过控制台可以观察到以下差异：

- **普通列表**：一次性渲染 1000 个 DOM 节点，加载时间较长（约 36ms）。
- **虚拟列表**：仅渲染可视区域部分 DOM 节点，加载时间显著减少（约 1.3ms）。
- **滚动交互**：普通列表在滚动时不会触发重新渲染，而虚拟列表需要实时计算可视区域，可能触发多次更新。

## 简易实现虚拟列表

后续实现了两个虚拟列表：元素定高 & 元素不定高。

## 元素定高：FixedSize

适用于所有列表项高度固定的场景，计算简单且性能优越。
<code src="./demo/fs.tsx"></code>

## 元素不定高：VarSize

支持高度不固定的列表项，适用更复杂的场景。
<code src="./demo/vs.tsx"></code>

## API

| 属性名      | 描述                                                                            | 类型                                                                           | 默认值 |
| ----------- | ------------------------------------------------------------------------------- | ------------------------------------------------------------------------------ | ------ |
| `children`  | 接收一个渲染函数，用于渲染每行内容，函数参数包含 `index` 及 `style`（行内样式） | `(props: { index: number; style: React.CSSProperties; }) => React.JSX.Element` | -      |
| `width`     | 列表容器的宽度                                                                  | `number`                                                                       | -      |
| `height`    | 列表容器的可视高度                                                              | `number`                                                                       | -      |
| `itemCount` | 列表项目的总数                                                                  | `number`                                                                       | -      |
| `itemSize`  | 每个项目的固定高度或大小（用于计算可视范围与滚动偏移）                          | `number`                                                                       | -      |
